# tinypic-cli

åŸºäº TinyJPG API çš„å›¾ç‰‡å‹ç¼©å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†ã€å¤±è´¥é‡è¯•ç­‰åŠŸèƒ½ã€‚

## å®‰è£…

```bash
npm i -g tinypic-cli
```

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **æ‰¹é‡å‹ç¼©**ï¼šæ”¯æŒå¤šç§å›¾ç‰‡æ ¼å¼ (jpg, jpeg, png, gif)
- ğŸ“¦ **åˆ†æ‰¹å¤„ç†**ï¼šæ¯æ‰¹å¤„ç†5å¼ å›¾ç‰‡ï¼Œé¿å…APIå‹åŠ›è¿‡å¤§
- â±ï¸ **æ™ºèƒ½å»¶è¿Ÿ**ï¼šæ‰¹æ¬¡é—´è‡ªåŠ¨å»¶è¿Ÿï¼Œæ˜¾ç¤ºå€’è®¡æ—¶
- ğŸ”„ **å¤±è´¥é‡è¯•**ï¼šè‡ªåŠ¨è®°å½•å¤±è´¥æ–‡ä»¶ï¼Œæ”¯æŒé‡æ–°å¤„ç†
- ğŸ“Š **è¯¦ç»†æŠ¥å‘Š**ï¼šæ˜¾ç¤ºå‹ç¼©ç»Ÿè®¡å’Œç»“æœæ‘˜è¦
- ğŸ” **é€’å½’æœç´¢**ï¼šæ”¯æŒæ·±åº¦éå†å­ç›®å½•
- ğŸ’¾ **å¤‡ä»½åŠŸèƒ½**ï¼šå¤„ç†å‰è‡ªåŠ¨å¤‡ä»½åŸæ–‡ä»¶
- ğŸ¯ **æ™ºèƒ½è¿‡æ»¤**ï¼šè‡ªåŠ¨å»é‡ï¼Œè·³è¿‡æ— æ³•ä¼˜åŒ–çš„æ–‡ä»¶

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# å‹ç¼©å½“å‰ç›®å½•æ‰€æœ‰å›¾ç‰‡
tiny

# å‹ç¼©å½“å‰ç›®å½•ï¼ˆç­‰åŒäºä¸Šé¢ï¼‰
tiny .

# å‹ç¼©æŒ‡å®šæ–‡ä»¶
tiny image.jpg
tiny photo1.jpg photo2.png

# å‹ç¼©æŒ‡å®šç›®å½•
tiny images/
```

### é«˜çº§ç”¨æ³•

```bash
# é€’å½’å‹ç¼©æ‰€æœ‰å­ç›®å½•çš„å›¾ç‰‡
tiny -r
tiny -r images/

# å¤‡ä»½æ‰€æœ‰æ–‡ä»¶åˆ°çˆ¶ç›®å½•çš„ _folder ä¸­
tiny -b

# é‡æ–°å¤„ç†ä¹‹å‰å¤±è´¥çš„æ–‡ä»¶
tiny failed

# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
tiny -v

# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
tiny -h
```

## å‘½ä»¤é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `-r` | é€’å½’å¤„ç†å­ç›®å½•ä¸­çš„æ‰€æœ‰å›¾ç‰‡ |
| `-b` | å¤‡ä»½å½“å‰ç›®å½•åˆ°çˆ¶ç›®å½•çš„ `_folder` ä¸­ |
| `-v` | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ |
| `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `failed` | é‡æ–°å¤„ç†ä¸Šæ¬¡å¤±è´¥çš„æ–‡ä»¶ |

## æ”¯æŒæ ¼å¼

- **å›¾ç‰‡æ ¼å¼**ï¼šJPG, JPEG, PNG, GIF
- **å¤§å°å†™ä¸æ•æ„Ÿ**ï¼šæ”¯æŒ .jpg/.JPG, .png/.PNG ç­‰

## å¤„ç†æµç¨‹

1. **æ–‡ä»¶å‘ç°**ï¼šæ‰«ææŒ‡å®šè·¯å¾„ï¼Œè¿‡æ»¤å›¾ç‰‡æ–‡ä»¶
2. **åˆ†æ‰¹å¤„ç†**ï¼šæ¯æ‰¹æœ€å¤š5ä¸ªæ–‡ä»¶ï¼Œé¿å…APIé™åˆ¶
3. **æ™ºèƒ½å»¶è¿Ÿ**ï¼šæ‰¹æ¬¡é—´ç­‰å¾…5ç§’ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶
4. **ç»“æœç»Ÿè®¡**ï¼šæ˜¾ç¤ºæˆåŠŸã€è·³è¿‡ã€å¤±è´¥çš„æ–‡ä»¶ç»Ÿè®¡
5. **å¤±è´¥è®°å½•**ï¼šè‡ªåŠ¨ä¿å­˜å¤±è´¥æ–‡ä»¶åˆ—è¡¨åˆ° `.tinypic-failed.json`

## è¾“å‡ºç¤ºä¾‹

```
âœ“ Found 12 images
Check API https://tinyjpg.com/backend/opt/shrink if it does not work
ğŸ“‹ Images will be processed in 3 batches (max 5 images per batch)
Processing...

ğŸ“¦ Processing batch 1/3 (5 images)...
âœ“ Saved 128.5k (45.2%) for `image1.jpg`
âœ“ Saved 89.3k (32.1%) for `image2.png`
âœ— Couldn't compress `image3.jpg` any further
âœ— Failed to compress `image4.png`: Connection timeout
âœ“ Saved 156.7k (38.9%) for `image5.jpg`
âœ… Batch 1/3 completed!

â³ wait 5 seconds before next batch...

ğŸ“¦ Processing batch 2/3 (5 images)...
...

ğŸ‰ All batches completed!
ğŸ“Š Summary: 8 successful, 2 skipped, 2 failed

âš ï¸ Skipped files (couldn't compress further):
   â€¢ image3.jpg
   â€¢ image8.png

âŒ Failed files:
   â€¢ image4.png - Connection timeout
   â€¢ image11.jpg - Invalid file format

ğŸ’¡ Tip: Run tiny failed to retry failed files
```

## å¤±è´¥é‡è¯•

å½“æœ‰æ–‡ä»¶å‹ç¼©å¤±è´¥æ—¶ï¼Œå·¥å…·ä¼šè‡ªåŠ¨ä¿å­˜å¤±è´¥åˆ—è¡¨ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡æ–°å¤„ç†ï¼š

```bash
tiny failed
```

é‡è¯•æ—¶ä¼šæ˜¾ç¤ºï¼š

```
ğŸ“‹ Found 2 failed files to retry:
   â€¢ image4.png
   â€¢ image11.jpg

ğŸ“¦ Processing batch 1/1 (2 images)...
...
```

## é…ç½®è¯´æ˜

å·¥å…·å†…ç½®ä»¥ä¸‹é…ç½®ï¼š

- **APIåœ°å€**ï¼šhttps://tinyjpg.com/backend/opt/shrink
- **æ‰¹æ¬¡å¤§å°**ï¼š5ä¸ªæ–‡ä»¶/æ‰¹
- **æ‰¹æ¬¡å»¶è¿Ÿ**ï¼š5ç§’
- **è¯·æ±‚è¶…æ—¶**ï¼š15ç§’
- **å¤±è´¥æ–‡ä»¶**ï¼šä¿å­˜åˆ° `.tinypic-failed.json`

## æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œè¦æ±‚**ï¼šéœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥è®¿é—® TinyJPG API
2. **æ–‡ä»¶å¤‡ä»½**ï¼šä½¿ç”¨ `-b` é€‰é¡¹å¯åœ¨å¤„ç†å‰å¤‡ä»½æ–‡ä»¶
3. **APIé™åˆ¶**ï¼šå·¥å…·é€šè¿‡åˆ†æ‰¹å¤„ç†å’Œå»¶è¿Ÿæ¥é¿å…APIé™åˆ¶
4. **å¤±è´¥å¤„ç†**ï¼šå•ä¸ªæ–‡ä»¶å¤±è´¥ä¸ä¼šä¸­æ–­æ•´ä¸ªå¤„ç†æµç¨‹
5. **é‡å¤å¤„ç†**ï¼šå·¥å…·ä¼šè‡ªåŠ¨å»é‡ï¼Œé¿å…é‡å¤å¤„ç†åŒä¸€æ–‡ä»¶

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æç¤º "Connection timeout"**
A: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæˆ–ç¨åé‡è¯•å¤±è´¥çš„æ–‡ä»¶

**Q: æŸäº›æ–‡ä»¶æ— æ³•å‹ç¼©**
A: æ–‡ä»¶å¯èƒ½å·²ç»é«˜åº¦ä¼˜åŒ–ï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡

**Q: æ‰¹é‡å¤„ç†ä¸­æ–­**
A: ä½¿ç”¨ `tiny failed` é‡æ–°å¤„ç†å¤±è´¥çš„æ–‡ä»¶

### é”™è¯¯ä»£ç 

- **Connection timeout**: ç½‘ç»œè¿æ¥è¶…æ—¶
- **Invalid file format**: æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ
- **No compressed output received**: APIæœªè¿”å›å‹ç¼©ç»“æœ

## å¼€å‘è€…

åŸºäº TinyJPG API å¼€å‘ï¼Œä½¿ç”¨ Node.js æ„å»ºã€‚

## è®¸å¯è¯

MIT License